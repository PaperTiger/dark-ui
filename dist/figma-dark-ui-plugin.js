!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self)["figma-dark-ui-plugin"]=n()}(this,function(){"use strict";var n=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")};function r(e,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e,n,o){return n&&r(e.prototype,n),o&&r(e,o),e},g=["color","backgroundColor","fill","stroke","borderBottomColor","borderRightColor","borderLeftColor","borderTopColor"],e="#262829",a="#202122",t="#2f3132",l="#36383a",i="#C1C5C9",c="#FFFFFF",b="#818688",d="#8e82c9",s="#333639",u="rgba(255, 255, 255, 0.1)",m="rgba(255, 255, 255, 0.06)",p={"rgb(255, 255, 255)":e,"rgb(252, 252, 252)":e,"rgb(248, 248, 248)":a,"rgb(240, 240, 240)":a,"rgb(241, 249, 255)":t,"rgb(237, 245, 250)":t,"rgb(229, 229, 229)":l,"rgb(239, 239, 239)":l,"rgb(217, 217, 217)":l,"rgb(212, 212, 212)":l,"rgb(218, 235, 247)":"#36393c","rgb(191, 186, 252)":d,"rgb(180, 180, 250)":d,"rgb(179, 179, 179)":b,"rgb(166, 172, 175)":"#777c7e","rgb(123, 97, 255)":"#a694ff","rgb(68, 68, 68)":"#dcdee0","rgb(51, 51, 51)":i,"rgb(44, 44, 44)":s,"rgb(5, 5, 5)":c,"rgb(0, 0, 0)":c,"rgba(0, 0, 0, 0.06)":m,"rgba(0, 0, 0, 0.1)":u,"rgba(0, 0, 0, 0.15)":"rgba(255,255,255, 0.15)","rgba(0, 0, 0, 0.2)":"rgba(255,255,255, 0.2)","rgba(0, 0, 0, 0.3)":"rgba(255,255,255, 0.3)","rgba(0, 0, 0, 0.4)":"rgba(255,255,255, 0.4)","rgba(0, 0, 0, 0.6)":"rgba(255,255,255, 0.6)","rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.5)","rgba(0, 0, 0, 0.75)":"rgba(255,255,255, 0.75)","rgba(0, 0, 0, 0.8)":"rgba(255,255,255, 0.8)","rgba(0, 0, 0, 0.9)":"rgba(255, 255, 255, 0.9)","rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)","rgba(44, 44, 44, 0.8)":s,"rgba(51, 51, 51, 0.3)":b,"rgba(123, 97, 255, 0.4)":"#5f4fb0","rgba(255, 255, 255, 0)":"rgba(0, 0, 0, 0)","rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.2)","rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)","rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)","rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)","rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.8)","rgba(255, 255, 255, 0.95)":"rgba(0, 0, 0, 0.95)"},f=[".action--unfaded",".action--enabled",".avatar--root--2kH_E",".basic_form--primaryBtn",".basic_form--greenBtn",".draggable_modal--backgroundOverlay--CPf6e",".emoji-mart-anchor-selected",".flyout_view--flyout",".folder_view--folderTeamName",".folder_view--pathSeparator",".filename_view--title",".filename_view--pathSeparator",".fullscreen_menu--searchInput",".header_modal--modalBackground",".multilevel_dropdown--optionActive",".library_item_tile--descriptionPopout",".transition_preview_pane--",".top_bar--",".tooltip--content",".toolbar_styles--activeButton",".toolbar_styles--enabledButton",".user_view--name",".text--_whiteText",".team_link--icon",".zoom_menu--zoomMenu",".help_widget--helpWidget",".help_widget--tooltip",".raw_components--iconButtonSelected"],h="\n\n  // Figma Dark Theme | Brought to you by:\n  // Mirko Santangelo, Papertiger, All Right Reserved\n  \n  .top_bar--header---JfcG,\n  .help_widget--helpWidget--22IIi { \n      background-color: ".concat(s,"; \n  }\n\n  .in_app_page__REFRESH--content--1l70i {\n      background-color: ").concat(e,"; \n  }\n\n  .option_button--untoggled--2KWMQ:not(.option_button--disabled--YNeqs):hover {\n      box-shadow: inset 0 0 0 1px ").concat(u,";\n  }\n\n  .pages_panel--tabsHeaderBordered--28fYc {\n      box-shadow: 0 1px 0 0 ").concat(l,';\n  }\n\n  .search--margin24--3oubR .search--searchInput--2JmjM,\n  .search--margin12--3G1pl .search--searchInput--2JmjM,\n  [class*="style_icon--bitmapImage"]:not([class*="style_icon--fillIcon"]),\n  [class*="style_preview_panel--renderedTextStyleThumbnail"] {\n    -webkit-filter: invert(90%);\n    filter: invert(90%);\n  }\n\n  .modal--title--1kOv4,\n  .segmented_control--segmentSelected--3vDJm {\n      fill: ').concat(i,";\n      color: ").concat(i,";\n  }\n\n  .raw_components--textInput--23_ta:not(:disabled):not(:hover):placeholder-shown {\n      background: linear-gradient(90deg,transparent 6px,rgba(255,255,255,.1) 0);\n      background-size: calc(100% - 6px) 1px;\n      background-position: left bottom -1px;\n      background-repeat: repeat-x;\n  }\n\n  .transform_panel--sliderContainer--3SoqU div div {\n      background-color: ").concat(l,";\n  }\n\n  .transform_panel--sliderAnnotationStroke--PBBmO {\n      border-color: ").concat(b,";\n  }\n\n  .transition_preview_pane--previewPanel--3sZan {\n      background: ").concat(m,';\n  }\n\n  [class*="role_row--select"] {\n    background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOSIgaGVpZ2h0PSI2IiB2aWV3Qm94PSIwIDAgOSA2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgICA8ZyBkYXRhLW5hbWU9IkNhbnZhcyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyODEyIC0xMTgwOCkiIGZpbGw9Im5vbmUiPiAgICAgICAgPGcgZGF0YS1uYW1lPSJWZWN0b3IgNyAoU3Ryb2tlKSI+ICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjI4MTIuNiAxMTgwOC42KSI+ICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgwIiBmaWxsPSIjNjY2NjY2IiBmaWxsLW9wYWNpdHk9IjEiLz4gICAgICAgICAgICA8L2c+ICAgICAgICA8L2c+ICAgIDwvZz4gICAgPGRlZnM+ICAgICAgICA8cGF0aCBpZD0icGF0aDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNIDAgMC43MDcxMDdMIDAuNzA3MTA3IDBMIDMuODUzNTUgMy4xNDY0NUwgNyAwTCA3LjcwNzExIDAuNzA3MTA3TCAzLjg1MzU1IDQuNTYwNjZMIDAgMC43MDcxMDdaIi8+ICAgIDwvZGVmcz48L3N2Zz4=);\n  }\n\n  [class*="emoji-mart-search"] input,\n  .lazy_input--lazyInput--2kTZE:not(.search--searchInput--2JmjM) {\n      background: ').concat(e,";\n      color: ").concat(i,";\n  }\n\n  .basic_form--primaryBtn--3NqnQ:disabled {\n      color: ").concat(i,";\n      background-color: rgba(255,255,255,.3);\n      border-color: rgba(255,255,255,.3);\n  }\n\n  .sidebar--navDefault--1zbCB,\n  .updates--updateFooter--1JjnE,\n  .library_preferences_modal--slidingPane--2C_Nx {\n      background-color: ").concat(e,";\n  }\n\n  .history_view--timeAsLabel--6fKiV {\n      color: ").concat(b,";\n  }\n\n  .top_bar--container--1xQEs,\n  .sidebar--navDefault--1zbCB,\n  .top_bar--container--1xQEs {\n     box-shadow: 1px 0 0 0 rgba(255,255,255,.1);\n  }\n\n  .linkified {\n      color: #30c2ff;\n  }\n\n  .emoji-mart-category-label span {\n      background-color: transparent;\n      color: ").concat(c,";\n  }\n\n  .full_width_page--fullWidthPage--Fg4oT {\n      color: ").concat(i,";\n  }\n\n  .team_admin--backToFiles--3tTyp {\n      border-color: rgba(255,255,255,.15);\n  }\n"),I=function(){function e(){n(this,e);window.figmaPlus;this.options={title:"Toggle Dark Theme",action:this.toggleTheme().bind(this)},window.figmaPlus.addCommand(this.options),this.enabled=localStorage.getItem("figma-dark-ui-plugin-enabled",!0),this.enabled&&this.toggleTheme()}return o(e,[{key:"toggleTheme",value:function(){if(document.getElementById("f-ui"))return localStorage.removeItem("figma-dark-ui-plugin-enabled"),void this.destroy();localStorage.setItem("figma-dark-ui-plugin-enabled",!0),this.init()}},{key:"init",value:function(){var e=document.createElement("style"),n=document.createTextNode(h);e.id="f-ui",e.appendChild(n),document.head.appendChild(e),this.mapColorsToRules(),console.log("[DARKUI] Done")}},{key:"destroy",value:function(){confirm("Figma needs a refresh in order to restore the default theme. Continue?")&&(localStorage.removeItem("figma-dark-ui-plugin-enabled"),setTimeout(function(){location.reload()},1e3))}},{key:"getCoreStylesheet",value:function(){var o,r=document.styleSheets;return Object.keys(r).forEach(function(e){var n=r[e].href;n&&n.includes("figma_app")&&(o=r[e].cssRules)}),o}},{key:"getCoreUIColor",value:function(o){var r=this;g.forEach(function(e){var n=o.style[e];""!=n&&(r.figmaColors.hasOwnProperty(n)||(r.figmaColors[n]=null))})}},{key:"mapColorsToRules",value:function(){var e=this;this.figmaColors={};var n=this.getCoreStylesheet(),o=!0,r=!1,a=void 0;try{for(var t,l=function(){var o=t.value;null!=o.selectorText&&0==e.isRuleIgnored(o.selectorText)&&(null!=o.style&&""!=o.style.color||""!=o.style.backgroundColor||""!=o.style.fill||""!=o.style.stroke||""!=o.style.borderBottomColor||""!=o.style.borderRightColor||""!=o.style.borderTopColor||""!=o.style.borderLeftColor)&&(g.forEach(function(e){var n=o.style[e];""!=n&&p.hasOwnProperty(n)&&(o.style[e]=p[n])}),e.getCoreUIColor(o))},i=n[Symbol.iterator]();!(o=(t=i.next()).done);o=!0)l()}catch(e){r=!0,a=e}finally{try{o||null==i.return||i.return()}finally{if(r)throw a}}}},{key:"isRuleIgnored",value:function(n){var o=!1;return f.forEach(function(e){n.includes(e)&&(o=!0)}),o}}]),e}();return window.darkUIPlugin=new I,I});
